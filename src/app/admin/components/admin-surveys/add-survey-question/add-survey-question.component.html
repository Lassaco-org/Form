<section class="main_header dis-flex">
  <div class="breadcrumb">
    <h2>Surveys</h2>
  </div>
  <div class="btns dis-flex">
    <button class="btn prim_btn">Preview</button>
    <button class="btn prim_btn">Save</button>
  </div>
</section>

<section>
  <!-- Surevey frame add (sfa) -->
  <div class="sfa">
    <div
      class="sfa_container"
      *ngFor="let i of questionFields; let questionIndex = index"
    >
      <div class="sfa_header dis-flex">
        <div class="sfa_header_question">
          <div class="input-field">
            <input
              type="text"
              id="question"
              placeholder="State your question"
              spellcheck="true"
            />
          </div>
        </div>
        <div class="sfa_header_right dis-flex">
          <div class="sfa_header_right_type" (click)="dropdown.click()">
            <div class="input-field dis-flex clickable dropdown-btn">
              <input
                type="text"
                placeholder="Select Question Type"
                class="clickable"
                [(ngModel)]="i.type"
                readonly
              />
              <!-- <p>Select Question Type</p> -->
              <i class="bx bx-chevron-down icon"></i>
            </div>
            <input
              type="checkbox"
              [id]="questionIndex"
              style="display: none"
              #dropdown
            />
            <div class="dropdown-area" style="overflow: auto">
              <!-- *ngIf="isDropdown" -->
              <ul class="dropdown-area_list">
                <li
                  class="dropdown-area_list_item"
                  *ngFor="let questionType of questionTypes"
                  (click)="selectItem(questionType, i)"
                >
                  <h5>{{ questionType.title }}</h5>
                  <p>{{ questionType.description }}</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="sfa_header_right_actions dis-flex">
            <div class="required dis-flex">
              Required
              <div class="switch">
                <input
                  [id]="'switch-' + questionIndex"
                  type="checkbox"
                  class="switch-input"
                />
                <label
                  [for]="'switch-' + questionIndex"
                  class="switch-label"
                ></label>
              </div>
            </div>
            <i
              class="bx bx-trash icon delete"
              title="Remove"
              (click)="removeQuestionField(questionIndex)"
            ></i>
          </div>
        </div>
      </div>
      <div class="sfa_body" *ngIf="i.type !== ''">
        <div class="sfa_body_container">
          <ng-container *ngIf="i.type === 'radio'">
            <div class="response-field">
              <div class="response-field_info dis-flex">
                <i class="bx bx-info-circle icon"></i>
                <p>Users can choose a single option</p>
              </div>
              <ul class="response-field_list">
                <li
                  class="response-field_list_item dis-flex"
                  *ngFor="
                    let childItem of i.questionOptionFields;
                    let optionIndex = index
                  "
                >
                  <label for="">{{ optionIndex + 1 }}.</label>
                  <div class="input-field dis-flex">
                    <input
                      type="text"
                      [placeholder]="'Option ' + (optionIndex + 1)"
                      name="{{ optionIndex }}"
                    />
                    <!-- [(ngModel)]="childItem.value"
                      #questionOption="ngModel" -->
                    <i
                      class="bx bx-x icon close"
                      (click)="removeQuestionOption(questionIndex, optionIndex)"
                    ></i>
                  </div>
                </li>
                <!-- <li class="response-field_list_item dis-flex">
                  <label for="">2.</label>
                  <div class="input-field dis-flex">
                    <input type="text" />
                    <i class="bx bx-x icon close"></i>
                  </div>
                </li>
                <li class="response-field_list_item dis-flex">
                  <label for="">3.</label>
                  <div class="input-field dis-flex">
                    <input type="text" />
                    <i class="bx bx-x icon close"></i>
                  </div>
                </li> -->
              </ul>
              <div class="response-field_other">
                <span
                  class="add-new clickable"
                  title="Add new option"
                  (click)="addQuestionOption(i.id)"
                >
                  <i class="bx bx-plus icon"></i>
                </span>
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="i.type === 'checkbox'">
            <div class="response-field">
              <div class="response-field_info dis-flex">
                <i class="bx bx-info-circle icon"></i>
                <p>Users can choose multiple options</p>
              </div>
              <ul class="response-field_list">
                <li
                  class="response-field_list_item dis-flex"
                  *ngFor="
                    let childItem of i.questionOptionFields;
                    let optionIndex = index
                  "
                >
                  <label for="">{{ optionIndex + 1 }}.</label>
                  <div class="input-field dis-flex">
                    <input
                      type="text"
                      [placeholder]="'Option ' + (optionIndex + 1)"
                      name="{{ optionIndex }}"
                    />
                    <!-- [(ngModel)]="childItem.value"
                      #questionOption="ngModel" -->
                    <i
                      class="bx bx-x icon close"
                      (click)="removeQuestionOption(questionIndex, optionIndex)"
                    ></i>
                  </div>
                </li>
                <!-- <li class="response-field_list_item dis-flex">
                  <label for="">2.</label>
                  <div class="input-field dis-flex">
                    <input type="text" />
                    <i class="bx bx-x icon close"></i>
                  </div>
                </li>
                <li class="response-field_list_item dis-flex">
                  <label for="">3.</label>
                  <div class="input-field dis-flex">
                    <input type="text" />
                    <i class="bx bx-x icon close"></i>
                  </div>
                </li> -->
              </ul>
              <div class="response-field_other">
                <span
                  class="add-new clickable"
                  title="Add new option"
                  (click)="addQuestionOption(i.id)"
                >
                  <i class="bx bx-plus icon"></i>
                </span>
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="i.type === 'text'">
            <div class="response-field">
              <div class="response-field_info dis-flex">
                <i class="bx bx-info-circle icon"></i>
                <p>Users can type their response</p>
              </div>
              <div class="response-field_input">
                <input type="text" placeholder="Type your response" readonly />
              </div>
            </div>
          </ng-container>
          <!-- <ng-container *ngIf="selectedDropdownValue === 'boolean'">
            <div class="response-field">
              <div class="response-field_info dis-flex">
                <i class="bx bx-info-circle icon"></i>
                <p>Users can decide if a statment is true or false</p>
              </div>
              <div class="response-field_decide dis-flex">
                <span>True</span>
                <span>False</span>
              </div>
            </div>
          </ng-container> -->
        </div>
      </div>
    </div>
    <div class="sfa_other dis-flex">
      <div class="add-new-sect" title="Add new section">
        <i class="bx bx-grid-horizontal icon"></i>
      </div>
      <div
        class="add-new-question clickable"
        title="Add new question"
        (click)="addQuestionField()"
      >
        <i class="bx bx-plus icon"></i>
      </div>
    </div>
  </div>
</section>
